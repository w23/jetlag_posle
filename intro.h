/* File generated with Shader Minifier 1.1.4
 * http://www.ctrl-alt-test.fr
 */
#ifndef INTRO_H_
# define INTRO_H_

const char *intro_glsl =
 "#version 130\n"
 "uniform vec2 RES;"
 "uniform float t;"
 "uniform sampler2D N;"
 "const vec3 v=vec3(0.,.01,1.);"
 "const float m=3.14159;"
 "float f(float v)"
 "{"
   "return fract(sin(v)*43758.5);"
 "}"
 "float x(vec2 v)"
 "{"
   "return f(dot(v,vec2(129.47,37.56)));"
 "}"
 "float n(vec3 v)"
 "{"
   "return f(dot(v,vec3(129.47,37.56,1.)));"
 "}"
 "float e(float v)"
 "{"
   "float m=floor(v);"
   "v=fract(v);"
   "return mix(f(m),f(m+1.),v);"
 "}"
 "float r(vec2 f)"
 "{"
   "vec2 m=floor(f);"
   "f=fract(f);"
   "return mix(mix(x(m),x(m+v.zx),f.x),mix(x(m+v.xz),x(m+v.zz),f.x),f.y);"
 "}"
 "float s(vec2 v)"
 "{"
   "return.5*r(v)+.25*r(v*2.3)+.125*r(v*4.1);"
 "}"
 "vec4 h(vec2 v)"
 "{"
   "return texture2D(N,v);"
 "}"
 "float e(vec3 v,float m)"
 "{"
   "return length(v)-m;"
 "}"
 "vec3 f(vec3 v,vec3 f)"
 "{"
   "return mod(v,f)-f*.5;"
 "}"
 "vec2 h(vec2 v,vec2 f)"
 "{"
   "return mod(v,f)-f*.5;"
 "}"
 "float e(vec3 v,float f,float m,float x)"
 "{"
   "return max(abs(v.y)-x,max(length(v)-m,f-length(v)));"
 "}"
 "float o(vec3 v)"
 "{"
   "return max(v.x,max(v.y,v.z));"
 "}"
 "float n(vec3 v,vec3 m)"
 "{"
   "return o(abs(v)-m);"
 "}"
 "float o(vec3 v,vec2 m)"
 "{"
   "return length(vec2(length(v.xz)-m.x,v.y))-m.y;"
 "}"
 "mat3 p(float v)"
 "{"
   "float f=sin(v),m=cos(v);"
   "return mat3(1.,0.,0.,0.,m,-f,0.,f,m);"
 "}"
 "mat3 d(float v)"
 "{"
   "float f=sin(v),m=cos(v);"
   "return mat3(m,0.,f,0.,1.,0,-f,0.,m);"
 "}"
 "mat3 l(float v)"
 "{"
   "float f=sin(v),m=cos(v);"
   "return mat3(m,f,0.,-f,m,0.,0.,0.,1.);"
 "}"
 "float d(vec3 v,vec3 f,vec3 m,float x,float y)"
 "{"
   "vec3 z=m-v;"
   "float R=dot(z,f);"
   "if(R<0.)"
     "return y;"
   "float l=dot(z,z)-R*R,e=x*x;"
   "if(l<0.||l>e)"
     "return y;"
   "return R-sqrt(e-l);"
 "}"
 "float d(float v,float f,float m)"
 "{"
   "vec2 x=max(vec2(m-v,m-f),vec2(0));"
   "return max(m,min(v,f))-length(x);"
 "}"
 "float i(vec3 v)"
 "{"
   "return dot(v,v);"
 "}"
 "mat3 e(vec3 v,vec3 m,vec3 f)"
 "{"
   "vec3 x=normalize(v-m),z=normalize(cross(f,x));"
   "f=normalize(cross(x,z));"
   "return mat3(z,f,x);"
 "}"
 "float y=6.36e+06,z=6.38e+06,S=40.;"
 "vec3 k=vec3(0.,-y,0.),R=vec3(5.8e-06,1.35e-05,3.31e-05),c=vec3(2e-05),a=c*1.1,u;"
 "vec2 g(vec3 v)"
 "{"
   "float m=length(v-k)-y;"
   "vec2 f=vec2(exp(-m/8000.),exp(-m/1200.));"
   "return f;"
 "}"
 "float f(vec3 v,vec3 f,float m)"
 "{"
   "vec3 x=v-k;"
   "float R=dot(x,f),z=dot(x,x)-m*m,y=R*R-z;"
   "if(y<0.)"
     "return-1.;"
   "y=sqrt(y);"
   "float l=-R-y,u=-R+y;"
   "return l>=0.?l:u;"
 "}"
 "vec2 d(vec3 v,vec3 f,float m,float x)"
 "{"
   "vec2 R=vec2(0.);"
   "m/=x;"
   "f*=m;"
   "for(float y=0.;y<x;++y)"
     "R+=g(v+f*y);"
   "return R*m;"
 "}"
 "vec2 E;"
 "vec3 b,C;"
 "void f(vec3 v,vec3 m,float x,float y)"
 "{"
   "x/=y;"
   "m*=x;"
   "for(float r=0.;r<y;++r)"
     "{"
       "vec3 l=v+m*r;"
       "vec2 n=g(l)*x;"
       "E+=n;"
       "vec2 i=E;"
       "float e=f(l,u,z);"
       "i+=d(l,u,e,8.);"
       "vec3 s=exp(-R*i.x-a*i.y);"
       "b+=s*n.x;"
       "C+=s*n.y;"
     "}"
 "}"
 "vec3 g(vec3 v,vec3 m,float x,vec3 y)"
 "{"
   "E=vec2(0.);"
   "b=C=vec3(0.);"
   "f(v,m,x,8.);"
   "float z=dot(m,u);"
   "return y*exp(-R*E.x-a*E.y)+S*(1.+z*z)*(b*R*.0597+C*c*.0196/pow(1.58-1.52*z,1.5));"
 "}"
 "float D(vec3 v)"
 "{"
   "float f=max(n(v,vec3(4.)),-n(v,vec3(3.9))),m=n(v-u*5.,vec2(mix(.1,2.,t/64.),5.).xyx);"
   "f=max(f,-m);"
   "return f;"
 "}"
 "vec3 w(vec3 m)"
 "{"
   "return normalize(vec3(D(m+v.yxx)-D(m-v.yxx),D(m+v.xyx)-D(m-v.xyx),D(m+v.xxy)-D(m-v.xxy)));"
 "}"
 "float D(vec3 v,vec3 m,float f,float x,int y)"
 "{"
   "for(int r=0;r<y;++r)"
     "{"
       "float l=D(v+m*f);"
       "f+=l;"
       "if(l<.001*f||f>x)"
         "break;"
     "}"
   "return f;"
 "}"
 "void main()"
 "{"
   "vec2 m=gl_FragCoord.xy/RES*2.-1.;"
   "m.x*=2.*RES.x/RES.y;"
   "vec3 x=vec3(0.,1.5,3.8),y=v.xzx,l=vec3(0.,1.,0.),r=normalize(vec3(m,-2.));"
   "r=e(x,l,y)*r;"
   "u=vec3(0.,1.,0.);"
   "const int R=16,k=4;"
   "float i=t;"
   "vec2 n=(gl_FragCoord.xy*vec2(17.,23.)+floor(t*943.))/textureSize(N,0);"
   "vec3 b=vec3(0.);"
   "for(int c=0;c<R;++c)"
     "{"
       "vec3 E=x,S=r,C=vec3(0.),a=vec3(1.);"
       "for(int h=0;h<k;++h)"
         "{"
           "float o=f(E,S,z);"
           "int p=0;"
           "float q=o,T=S.y<-.0001?-E.y/S.y:q;"
           "if(T<q)"
             "q=T,p=1;"
           "float Z=d(E,S,vec3(0.,0.,0.),1.,o);"
           "if(Z<q)"
             "q=Z,p=3;"
           "float Y=D(E,S,0.,20.,32);"
           "if(Y<10.&&Y<q)"
             "q=Y,p=2;"
           "vec3 X=vec3(0.),W=vec3(.75,.75,.73),V=vec3(0.,1.,0.);"
           "float U=.04;"
           "if(p==0)"
             "X=g(E,S,q,vec3(0.)),W=vec3(0.),E=E+S*q;"
           "else"
             "{"
               "E=E+S*q;"
               "if(p==1)"
                 "{"
                   "float Q=smoothstep(.4,.5,s(E.xz*2.));"
                   "U=.02+.2*Q;"
                 "}"
               "else"
                 " if(p==2)"
                   "{"
                     "U=.8;"
                     "V=w(E);"
                     "E+=V*.01;"
                     "float Q=-4.+8.*mod(t/64.,1.);"
                   "}"
                 "else"
                   " if(p==3)"
                     "V=normalize(E);"
             "}"
           "vec3 Q=vec3(1.);"
           "a*=Q;"
           "C+=a*X;"
           "a*=W.xyz;"
           "if(all(lessThan(a,vec3(.001))))"
             "break;"
           "S=reflect(S,V);"
           "S=normalize(mix(S,(vec3(f(i+=S.x),f(i+=S.y),f(i+=S.z))-.5)*2.,U));"
           "S*=sign(dot(V,S));"
         "}"
       "b+=C;"
     "}"
   "b/=float(R);"
   "gl_FragColor=vec4(b,mix(.1,1.,step(t,1.)));"
 "}";

#endif // INTRO_H_
