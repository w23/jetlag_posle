/* File generated with Shader Minifier 1.1.4
 * http://www.ctrl-alt-test.fr
 */
#ifndef INTRO_H_
# define INTRO_H_

const char *intro_glsl =
 "#version 130\n"
 "uniform vec2 RES;"
 "uniform float t;"
 "uniform sampler2D N;"
 "const vec3 v=vec3(0.,.01,1.);"
 "const float m=3.14159;"
 "float f(float v)"
 "{"
   "return fract(sin(v)*43758.5);"
 "}"
 "float x(vec2 v)"
 "{"
   "return f(dot(v,vec2(129.47,37.56)));"
 "}"
 "float e(vec2 f)"
 "{"
   "vec2 m=floor(f);"
   "f=fract(f);"
   "return mix(mix(x(m),x(m+v.zx),f.x),mix(x(m+v.xz),x(m+v.zz),f.x),f.y);"
 "}"
 "float n(vec2 v)"
 "{"
   "return.5*e(v)+.25*e(v*2.3)+.125*e(v*4.1);"
 "}"
 "vec4 s(vec2 v)"
 "{"
   "return texture2D(N,v);"
 "}"
 "vec3 e(vec3 v,vec3 f)"
 "{"
   "return mod(v,f)-f*.5;"
 "}"
 "float r(vec3 v)"
 "{"
   "return max(v.x,max(v.y,v.z));"
 "}"
 "float f(vec3 v,vec3 f)"
 "{"
   "return r(abs(v)-f);"
 "}"
 "mat3 p(float v)"
 "{"
   "float f=sin(v),x=cos(v);"
   "return mat3(1.,0.,0.,0.,x,-f,0.,f,x);"
 "}"
 "mat3 i(float v)"
 "{"
   "float f=sin(v),x=cos(v);"
   "return mat3(x,0.,f,0.,1.,0,-f,0.,x);"
 "}"
 "mat3 d(float v)"
 "{"
   "float f=sin(v),x=cos(v);"
   "return mat3(x,f,0.,-f,x,0.,0.,0.,1.);"
 "}"
 "float d(vec3 f,vec3 v,vec3 m,float x,float y)"
 "{"
   "vec3 z=m-f;"
   "float e=dot(z,v);"
   "if(e<0.)"
     "return y;"
   "float i=dot(z,z)-e*e,u=x*x;"
   "if(i<0.||i>u)"
     "return y;"
   "return e-sqrt(u-i);"
 "}"
 "mat3 d(vec3 v,vec3 f,vec3 x)"
 "{"
   "vec3 m=normalize(v-f),z=normalize(cross(x,m));"
   "x=normalize(cross(m,z));"
   "return mat3(z,x,m);"
 "}"
 "float y=6.36e+06,z=6.38e+06,S=40.;"
 "vec3 k=vec3(0.,-y,0.),R=vec3(5.8e-06,1.35e-05,3.31e-05),c=vec3(2e-05),o=c*1.1,u;"
 "vec2 l(vec3 v)"
 "{"
   "float f=length(v-k)-y;"
   "vec2 m=vec2(exp(-f/8000.),exp(-f/1200.));"
   "return m;"
 "}"
 "float e(vec3 v,vec3 f,float x)"
 "{"
   "vec3 m=v-k;"
   "float e=dot(m,f),z=dot(m,m)-x*x,i=e*e-z;"
   "if(i<0.)"
     "return-1.;"
   "i=sqrt(i);"
   "float y=-e-i,u=-e+i;"
   "return y>=0.?y:u;"
 "}"
 "vec2 d(vec3 v,vec3 f,float m,float x)"
 "{"
   "vec2 e=vec2(0.);"
   "m/=x;"
   "f*=m;"
   "for(float i=0.;i<x;++i)"
     "e+=l(v+f*i);"
   "return e*m;"
 "}"
 "vec2 g;"
 "vec3 a,E;"
 "void e(vec3 v,vec3 f,float m,float x)"
 "{"
   "m/=x;"
   "f*=m;"
   "for(float i=0.;i<x;++i)"
     "{"
       "vec3 y=v+f*i;"
       "vec2 n=l(y)*m;"
       "g+=n;"
       "vec2 r=g;"
       "float s=e(y,u,z);"
       "r+=d(y,u,s,8.);"
       "vec3 c=exp(-R*r.x-o*r.y);"
       "a+=c*n.x;"
       "E+=c*n.y;"
     "}"
 "}"
 "vec3 f(vec3 v,vec3 f,float m,vec3 x)"
 "{"
   "g=vec2(0.);"
   "a=E=vec3(0.);"
   "e(v,f,m,8.);"
   "float i=dot(f,u);"
   "return x*exp(-R*g.x-o*g.y)+S*(1.+i*i)*(a*R*.0597+E*c*.0196/pow(1.58-1.52*i,1.5));"
 "}"
 "float h(vec3 v)"
 "{"
   "float m=max(f(v,vec3(4.)),-f(v,vec3(3.9))),x=f(v-u*5.,vec2(mix(.1,2.,t/64.),5.).xyx);"
   "m=max(m,-x);"
   "return m;"
 "}"
 "vec3 D(vec3 m)"
 "{"
   "return normalize(vec3(h(m+v.yxx)-h(m-v.yxx),h(m+v.xyx)-h(m-v.xyx),h(m+v.xxy)-h(m-v.xxy)));"
 "}"
 "float D(vec3 v,vec3 f,float m,float x,int y)"
 "{"
   "for(int i=0;i<y;++i)"
     "{"
       "float e=h(v+f*m);"
       "m+=e;"
       "if(e<.001*m||m>x)"
         "break;"
     "}"
   "return m;"
 "}"
 "void main()"
 "{"
   "vec2 m=gl_FragCoord.xy/RES*2.-1.;"
   "m.x*=2.*RES.x/RES.y;"
   "vec3 x=vec3(0.,1.5,3.8),i=v.xzx,y=vec3(0.,1.,0.),r=normalize(vec3(m,-2.));"
   "r=d(x,y,i)*r;"
   "u=vec3(0.,1.,0.);"
   "const int k=16;"
   "float a=t;"
   "vec3 s=vec3(0.);"
   "for(int c=0;c<k;++c)"
     "{"
       "vec3 g=x,S=r,E=vec3(0.),R=vec3(1.);"
       "for(int p=0;p<4;++p)"
         "{"
           "float l=e(g,S,z);"
           "int h=0;"
           "float o=l,b=S.y<-.0001?-g.y/S.y:o;"
           "if(b<o)"
             "o=b,h=1;"
           "float C=d(g,S,vec3(0.,0.,0.),1.,l);"
           "if(C<o)"
             "o=C,h=3;"
           "float q=D(g,S,0.,20.,32);"
           "if(q<10.&&q<o)"
             "o=q,h=2;"
           "vec3 T=vec3(0.),w=vec3(.75,.75,.73),Z=vec3(0.,1.,0.);"
           "float Y=.04;"
           "if(h==0)"
             "T=f(g,S,o,vec3(0.)),w=vec3(0.),g=g+S*o;"
           "else"
             "{"
               "g=g+S*o;"
               "if(h==1)"
                 "{"
                   "float X=smoothstep(.4,.5,n(g.xz*2.));"
                   "Y=.02+.2*X;"
                 "}"
               "else"
                 " if(h==2)"
                   "{"
                     "Y=.8;"
                     "Z=D(g);"
                     "g+=Z*.01;"
                     "float X=-4.+8.*mod(t/64.,1.);"
                   "}"
                 "else"
                   " if(h==3)"
                     "Z=normalize(g);"
             "}"
           "vec3 X=vec3(1.);"
           "R*=X;"
           "E+=R*T;"
           "R*=w.xyz;"
           "if(all(lessThan(R,vec3(.001))))"
             "break;"
           "S=reflect(S,Z);"
           "S=normalize(mix(S,(vec3(f(a+=S.x),f(a+=S.y),f(a+=S.z))-.5)*2.,Y));"
           "S*=sign(dot(Z,S));"
         "}"
       "s+=E;"
     "}"
   "s/=float(k);"
   "gl_FragColor=vec4(s,mix(.1,1.,step(t,1.)));"
 "}";

#endif // INTRO_H_
