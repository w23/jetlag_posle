/* File generated with Shader Minifier 1.1.4
 * http://www.ctrl-alt-test.fr
 */
#ifndef INTRO_H_
# define INTRO_H_

const char *intro_glsl =
 "#version 130\n"
 "uniform vec2 RES;"
 "uniform float t;"
 "uniform sampler2D N;"
 "const vec3 v=vec3(0.,.001,1.);"
 "const float m=3.14159;"
 "float i=t/8.,f=t/16.,x=t/32.,y=t/64.;"
 "float n(float v)"
 "{"
   "return fract(sin(v)*43758.5);"
 "}"
 "float s(vec2 v)"
 "{"
   "return n(dot(v,vec2(129.47,37.56)));"
 "}"
 "float e(vec2 f)"
 "{"
   "vec2 m=floor(f);"
   "f=fract(f);"
   "return mix(mix(s(m),s(m+v.zx),f.x),mix(s(m+v.xz),s(m+v.zz),f.x),f.y);"
 "}"
 "float p(vec2 v)"
 "{"
   "return.5*e(v)+.25*e(v*2.3)+.125*e(v*4.1);"
 "}"
 "vec4 r(vec2 v)"
 "{"
   "return texture2D(N,v);"
 "}"
 "vec4 d(vec2 v)"
 "{"
   "return texture2D(N,(v+.5)/textureSize(N,0));"
 "}"
 "float d(inout vec2 v,float x)"
 "{"
   "float f=2*m/x,i=atan(v.y,v.x)+f/2.,g=length(v),y=floor(i/f);"
   "i=mod(i,f)-f/2.;"
   "v=vec2(cos(i),sin(i))*g;"
   "if(abs(y)>=x/2)"
     "y=abs(y);"
   "return y;"
 "}"
 "vec3 e(vec3 v,vec3 f)"
 "{"
   "return mod(v,f)-f*.5;"
 "}"
 "float h(vec3 v)"
 "{"
   "return max(v.x,max(v.y,v.z));"
 "}"
 "float h(vec3 v,vec3 f)"
 "{"
   "return h(abs(v)-f);"
 "}"
 "mat3 c(float v)"
 "{"
   "float f=sin(v),x=cos(v);"
   "return mat3(1.,0.,0.,0.,x,-f,0.,f,x);"
 "}"
 "mat3 R(float v)"
 "{"
   "float f=sin(v),x=cos(v);"
   "return mat3(x,0.,f,0.,1.,0,-f,0.,x);"
 "}"
 "mat3 D(float v)"
 "{"
   "float f=sin(v),x=cos(v);"
   "return mat3(x,f,0.,-f,x,0.,0.,0.,1.);"
 "}"
 "float D(float v,float f,float x)"
 "{"
   "vec2 m=max(vec2(x-v,x-f),vec2(0));"
   "return max(x,min(v,f))-length(m);"
 "}"
 "mat3 R(vec3 v,vec3 f,vec3 x)"
 "{"
   "vec3 m=normalize(v-f),y=normalize(cross(x,m));"
   "x=normalize(cross(m,y));"
   "return mat3(y,x,m);"
 "}"
 "float k=6.36e+06,z=6.38e+06,l=40.;"
 "vec3 S=vec3(0.,-k,0.),o=vec3(5.8e-06,1.35e-05,3.31e-05),a=vec3(2e-05),u=a*1.1,g;"
 "vec2 w(vec3 v)"
 "{"
   "float f=length(v-S)-k;"
   "return vec2(exp(-f/8000.),exp(-f/1200.));"
 "}"
 "float c(vec3 v,vec3 f,float x)"
 "{"
   "vec3 m=v-S;"
   "float e=dot(m,f),y=dot(m,m)-x*x,i=e*e-y;"
   "if(i<0.)"
     "return-1.;"
   "i=sqrt(i);"
   "float n=-e-i,g=-e+i;"
   "return n>=0.?n:g;"
 "}"
 "vec2 D(vec3 v,vec3 f,float m,float x)"
 "{"
   "vec2 i=vec2(0.);"
   "m/=x;"
   "f*=m;"
   "for(float y=0.;y<x;++y)"
     "i+=w(v+f*y);"
   "return i*m;"
 "}"
 "vec3 R(vec3 v,vec3 f,float m,vec3 x)"
 "{"
   "vec2 i=vec2(0.);"
   "vec3 y,r;"
   "y=r=vec3(0.);"
   "float n=8.;"
   "m/=n;"
   "f*=m;"
   "for(float e=0.;e<n;++e)"
     "{"
       "vec3 s=v+f*e;"
       "vec2 d=w(s)*m;"
       "i+=d;"
       "vec2 R=i;"
       "float k=c(s,g,z);"
       "R+=D(s,g,k,8.);"
       "vec3 S=exp(-o*R.x-u*R.y);"
       "y+=S*d.x;"
       "r+=S*d.y;"
     "}"
   "float e=dot(f,g);"
   "return x*exp(-o*i.x-u*i.y)+l*(1.+e*e)*(y*o*.0597+r*a*.0196/pow(1.58-1.52*e,1.5));"
 "}"
 "float b(vec3 f)"
 "{"
   "return f.y+=.2,min(length(f-v.zxx*1.5)-.8,length(f+v.zxx*1.5)-.8);"
 "}"
 "float E(vec3 f)"
 "{"
   "float m=-h(f-v.xzx*3.,vec3(8.,4.,4.));"
   "return m;"
 "}"
 "mat3 C=c(y)*R(x);"
 "float T(vec3 v)"
 "{"
   "return h(C*(v-vec3((t-320.)*3./256.-1.5,0.,0.)),vec3(.3));"
 "}"
 "float q(vec3 v)"
 "{"
   "float f=b(v);"
   "if(t>320.&&t<576.)"
     "f=D(f,T(v),.3);"
   "return min(E(v),f);"
 "}"
 "vec3 Z(vec3 f)"
 "{"
   "return normalize(vec3(q(f+v.yxx)-q(f-v.yxx),q(f+v.xyx)-q(f-v.xyx),q(f+v.xxy)-q(f-v.xxy)));"
 "}"
 "float D(vec3 v,vec3 f,float x,float m,int y)"
 "{"
   "float i=1.;"
   "for(int r=0;r<y;++r)"
     "{"
       "float s=q(v+f*x);"
       "x+=s*i;"
       "if(s<.001*x||x>m)"
         "break;"
     "}"
   "return x;"
 "}"
 "void main()"
 "{"
   "vec2 f=gl_FragCoord.xy/RES*2.-1.;"
   "f.x*=2.*RES.x/RES.y;"
   "vec3 m=vec3(0.,1.5,3.9),x=v.xzx,i=vec3(0.,0.,0.),y=normalize(vec3(f,-2.));"
   "if(t<256.)"
     "{"
       "float s=smoothstep(64.,256.,t);"
       "i=mix(vec3(0.,.4,-4.),vec3(0.),s);"
       "m=mix(vec3(0.,.4,-3.),vec3(0.,1.5,3.9),s);"
     "}"
   "y=R(m,i,x)*y;"
   "g=vec3(0.,1.,0.);"
   "const int s=16;"
   "float e=t;"
   "vec3 r=vec3(0.);"
   "for(int S=0;S<s;++S)"
     "{"
       "vec3 a=m,l=y,k=vec3(0.),u=vec3(1.);"
       "for(int h=0;h<4;++h)"
         "{"
           "float w=c(a,l,z);"
           "int q=0;"
           "float o=w,C=min(o,20.),T=D(a,l,0.,C,32);"
           "if(T<o)"
             "o=T,q=2;"
           "vec3 Y=vec3(0.),X=vec3(.75,.75,.73),W=vec3(0.,1.,0.);"
           "float V=.04;"
           "if(q==0)"
             "{"
               "Y=R(a,l,o,vec3(0.));"
               "gl_FragColor=vec4(1000.,0.,0.,1.);"
               "return;"
             "}"
           "else"
             "{"
               "a=a+l*o;"
               "if(q==1)"
                 "{"
                   "float U=smoothstep(.4,.5,p(a.xz*2.));"
                   "V=.02+.2*U;"
                 "}"
               "else"
                 " if(q==2)"
                   "{"
                     "W=Z(a);"
                     "a+=W*.01;"
                     "if(E(a)>b(a))"
                       "V=.04;"
                     "else"
                       "{"
                         "V=.8;"
                         "if(a.z<-3.9)"
                           "{"
                             "vec2 U=floor(a.xy*4.);"
                             "vec4 Q=d(U.yy);"
                             "float P=mod(-t/2.+Q.x*64.,64.)-32.;"
                             "Y=vec3(step(P,U.x)*step(U.x,P+1.+8.*Q.y));"
                           "}"
                         "else"
                           " if(a.y<0.)"
                             "{"
                               "vec4 U=d(a.xz*8.),Q=d(a.xz*4.+(U.xy-.5)*2.);"
                               "V=.01+.8*Q.x;"
                             "}"
                       "}"
                   "}"
                 "else"
                   " if(q==3)"
                     "W=normalize(a);"
             "}"
           "k+=u*Y;"
           "u*=X.xyz;"
           "if(all(lessThan(u,vec3(.001))))"
             "break;"
           "l=reflect(l,W);"
           "l=normalize(mix(l,(vec3(n(e+=l.x),n(e+=l.y),n(e+=l.z))-.5)*2.,V));"
           "l*=sign(dot(W,l));"
         "}"
       "r+=k;"
     "}"
   "r/=float(s);"
   "float a=.15;"
   "gl_FragColor=vec4(r,mix(a,1.,step(t,1.)));"
 "}";

#endif // INTRO_H_
